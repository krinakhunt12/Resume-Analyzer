<div class="upload-container">
  <div class="upload-layout">
    <!-- Left Side: Resume Upload -->
    <div class="upload-section">
      <div class="upload-card">
        <h2>Upload Your Resume</h2>
        <p class="upload-description">
          Drag and drop your resume here or click to browse. We support PDF and DOCX formats.
        </p>

        <div
          class="drop-zone"
          [class.drag-over]="isDragOver()"
          [class.has-file]="resumeFile()"
          [class.error]="errorMessage()"
          (dragover)="onDragOver($event)"
          (dragleave)="onDragLeave($event)"
          (drop)="onDrop($event)"
          (click)="triggerFileInput()"
        >
          <div class="drop-zone-content">
            @if (resumeFile()) {
              <div class="file-selected">
                <svg class="file-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                  <polyline points="14,2 14,8 20,8"/>
                </svg>
                <div class="file-info">
                  <p class="file-name">{{ resumeFile()?.name }}</p>
                  <p class="file-size">{{ (resumeFile()?.size || 0) / 1024 / 1024 | number:'1.1-1' }} MB</p>
                </div>
                <button class="remove-file-btn" (click)="clearFile(); $event.stopPropagation()" type="button">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <line x1="18" y1="6" x2="6" y2="18"/>
                    <line x1="6" y1="6" x2="18" y2="18"/>
                  </svg>
                </button>
              </div>
            } @else {
              <svg class="upload-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="7,10 12,15 17,10"/>
                <line x1="12" y1="15" x2="12" y2="3"/>
              </svg>
              <p class="drop-text">Drop your resume here</p>
              <p class="or-text">or</p>
              <button class="choose-file-btn" type="button">Choose File</button>
            }
          </div>
        </div>

        @if (errorMessage()) {
          <div class="error-message">
            <svg class="error-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <circle cx="12" cy="12" r="10"/>
              <line x1="15" y1="9" x2="9" y2="15"/>
              <line x1="9" y1="9" x2="15" y2="15"/>
            </svg>
            {{ errorMessage() }}
          </div>
        }

        <input
          #fileInput
          type="file"
          accept=".pdf,.docx,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document"
          (change)="onFileSelected($event)"
          style="display: none;"
        />
      </div>
    </div>

    <!-- Right Side: Job Description -->
    <div class="jd-section">
      <div class="jd-card">
        <h3>Job Description <span class="optional">(Optional)</span></h3>
        <p class="jd-description">
          Paste the job description to get personalized analysis and match scoring.
        </p>

        <textarea
          class="jd-textarea"
          rows="12"
          placeholder="Paste the job description here to get tailored recommendations..."
          [(ngModel)]="jobDescription"
          [disabled]="isLoading"
        ></textarea>
      </div>
    </div>
  </div>

  <!-- Analyze Button -->
  <div class="action-section">
    <button
      class="analyze-btn"
      [disabled]="!canAnalyze"
      [class.loading]="isLoading"
      (click)="analyzeResume()"
      type="button"
    >
      @if (isLoading) {
        <div class="loading-content">
          <div class="loading-spinner"></div>
          <span>Analyzing your resume...</span>
        </div>
      } @else {
        <span>Analyze Resume</span>
        <svg class="analyze-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M5 12l5 5L20 7"/>
        </svg>
      }
    </button>
  </div>
</div>